<div class="-mx-6 -my-6 h-full min-h-0" data-controller="drawer">
  <div class="flex h-full min-h-0 min-w-0 gap-4 p-4">
    <section class="min-w-0 flex-1 min-h-0">
      <%= render "dashboard/calendar_frame", events: @occurrences, start_date: @start_date %>
    </section>

    <aside class="w-wd shrink-0 min-h-0 overflow-hidden">
      <div class="h-full min-h-0 overflow-y-auto scrollbars">
        <%= render Studs::AgendaComponent.new(title: "Agenda", subtitle: "Today", mode: :panel) do |a| %>
          <% a.with_item(time: "9:00 AM", title: "CSC 405", meta: "Room 120", tag: "Class", tag_color: :blue) %>
          <% a.with_item(time: "2:00 PM", title: "CSC 499", meta: "Room 108", tag: "Class", tag_color: :emerald) %>
          <% a.with_item(time: "6:00 PM", title: "CSC 448", meta: "Room 224", tag: "Class", tag_color: :orange) %>
        <% end %>
      </div>
    </aside>
  </div>


  <!-- Drawer overlay -->
  <div
    data-drawer-target="overlay"
    data-action="click->drawer#close"
    class="fixed inset-0 z-40 bg-black/60 backdrop-blur-sm opacity-0 pointer-events-none transition-opacity duration-300">
  </div>

  <!-- Drawer panel -->
  <div class="fixed inset-0 z-50 flex items-center justify-center pointer-events-none px-4">
    <div
      data-drawer-target="panel"
      role="dialog"
      aria-modal="true"
      class="pointer-events-auto w-[min(92vw,42rem)]
             max-h-[85vh] overflow-hidden
             rounded-2xl border border-zinc-800 bg-zinc-950/90 backdrop-blur shadow-2xl
             translate-x-[110vw] transition-transform duration-300 ease-in-out">

      <%= turbo_frame_tag "event_drawer",
            class: "block h-full",
            data: {
              drawer_target: "frame",
              action: "turbo:before-fetch-request->drawer#showSkeleton turbo:frame-load->drawer#frameLoaded turbo:submit-end->drawer#submitEnded"
            } do %>
      <% end %>
    </div>
  </div>

  <template data-drawer-target="skeleton">
    <%= render "events/drawer_skeleton" %>
  </template>
</div>
