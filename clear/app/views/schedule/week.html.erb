<%# ---------- Top Bar (Step 5) ---------- %>
<% content_for :top_bar do %>
  <%= render Studs::TopBarComponent.new(
        title: "Schedule",
        subtitle: @week_start.strftime("Week of %B %d")
      ) do |t| %>
    <% t.with_actions do %>
      <div class="flex items-center gap-2">
        <%= link_to "Prev",
              schedule_week_path(date: @week_start - 7.days),
              class: "btn btn-secondary" %>

        <%= link_to "Today",
              schedule_week_path,
              class: "btn btn-secondary" %>

        <%= link_to "Next",
              schedule_week_path(date: @week_start + 7.days),
              class: "btn btn-secondary" %>
      </div>
    <% end %>
  <% end %>
<% end %>

<%# ---------- Week Grid (Steps 3 + 4) ---------- %>
<div class="grid grid-cols-7 gap-4 h-full">
  <% @days.each do |day| %>
    <div class="flex flex-col rounded-2xl border border-zinc-800 bg-zinc-950 p-3 min-h-0">

      <!-- Day header -->
      <div class="mb-3">
        <div class="text-sm font-semibold text-zinc-200">
          <%= day.strftime("%A") %>
        </div>
        <div class="text-xs text-zinc-500">
          <%= day.strftime("%b %d") %>
        </div>
      </div>

      <!-- Items -->
      <div class="flex-1 space-y-2 overflow-y-auto">
        <% if @items_by_day[day].present? %>
          <% @items_by_day[day].each do |item| %>
            <div class="rounded-xl bg-zinc-900 p-3 text-sm">
              <div class="font-medium text-zinc-100">
                <%= item.title %>
              </div>

              <% if item.starts_at.present? %>
                <div class="text-xs text-zinc-500">
                  <%= item.starts_at.strftime("%I:%M %p") %>
                </div>
              <% end %>
            </div>
          <% end %>
        <% else %>
          <!-- Empty state -->
          <div class="mt-6 text-center text-xs text-zinc-600 italic">
            No items
          </div>
        <% end %>
      </div>
    </div>
  <% end %>
</div>